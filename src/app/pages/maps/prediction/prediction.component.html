<ion-content style="height:50px;opacity: 0.1;position: absolute;z-index:1">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
</ion-content>
<nb-card accent="info">
  <nb-card-header>
    <h2>Prediction Map</h2>
  </nb-card-header>

  <nb-card-body class="inline-form-card">
    <p style="padding-left: 1em;"><b>Filter Option: </b></p>
    <form (ngSubmit)="displayMarkers()" style="padding: 0em 1em;" class="form-inline">
      <select style="width:300px;" [(ngModel)]="ovitrap.locality" class="form-control" name='locality'
        placeholder="Select Locality">
        <option [ngValue]="">Select Locality</option>
        <option *ngFor="let item of items;" [ngValue]="item">{{item}}</option>
      </select>

      <select style="width:250px;" [(ngModel)]="ovitrap.display_type" class="form-control" name='displayType'
        placeholder="Select Display Range">
        <option [ngValue]="">Select Display Range</option>
        <option *ngFor="let type of types;" [ngValue]="type">{{type}}</option>
      </select>

      <input *ngIf="ovitrap.display_type == 'date'" nbInput name='dateRange' [(ngModel)]=" ovitrap.dateRange"
        placeholder="Date Install and Date Collect" [nbDatepicker]="datepicker">
      <nb-rangepicker #datepicker></nb-rangepicker>

      <select *ngIf="ovitrap.display_type == 'week'" class="form-control" [(ngModel)]="ovitrap.epid_week"
        name='epidWeek' placeholder="Select Epid Week">
        <option [ngValue]="">Select Epid Week</option>
        <option *ngFor="let item of weeks;" [ngValue]="item">{{item}}</option>
      </select>

      <select *ngIf="ovitrap.display_type != 'date'" class="form-control" [(ngModel)]="ovitrap.year" name='year'
        placeholder="Select Year">
        <option [ngValue]="">Select Year</option>
        <option *ngFor="let item of years;" [ngValue]="item">{{item}}</option>
      </select>

      <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    <br>
    <p style="padding-left: 1em;"><b>Display Option: </b></p>
    <div style="padding: 0em 1em;" class="form-inline">
      <select style="width:250px;" [(ngModel)]="displayRadiusType" (change)="onRadiusClick($event.target.value)"
        class="form-control" name='displayRadiusType' placeholder="Select Radius Display Type">
        <option [ngValue]="">Select Radius Display Type</option>
        <option *ngFor="let type of rtypes;" [ngValue]="type">{{type}}</option>
      </select>
      <select style="width:250px;" [(ngModel)]="displayType" (change)="onEditClick($event.target.value)"
        class="form-control" name='displayType' placeholder="Select Marker Display Type">
        <option [ngValue]="">Select Marker Display Type</option>
        <option *ngFor="let type of dstypes;" [ngValue]="type">{{type}}</option>
      </select>
    </div>
  </nb-card-body>

  <nb-card-body>

    <div id='leafletMap' leaflet [leafletOptions]="options" [leafletLayersControl]="layersControl"
      (leafletMapReady)="onMapReady($event)" [leafletLayers]="layers"></div>
  </nb-card-body>
</nb-card>